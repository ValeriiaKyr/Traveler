{% extends "index.html" %}
{% include "includes/header.html" %}
{% load crispy_forms_filters %}

{% block content %}
  <!-- -------- START Locations Section with borders and images -------- -->
<section class="py-9">
  <div class="container">
    <div class="text-center mb-5">
      <h1 class="display-4">Locations</h1>
{#    <form class="form-inline">#}
{#    {{ location_search_form|crispy }}#}
{#    <input class="btn btn-secondary" type="submit" value="ðŸ”Ž">#}
{#    </form>#}
    <!-- Search form with updated styles -->
     <form class="form-inline p-2 mb-4" style="border: 1px solid #ddd; border-radius: 5px; background-color: #f5f5f5;">
        <div class="row justify-content-center align-items-center">
          <div class="col-md-10 mb-2 mb-md-0">
            {{ location_search_form|crispy }}
          </div>
          <div class="col-md-2 text-center">
            <button class="btn btn-primary w-100" type="submit">
              <i class="fas fa-search"></i> Search
            </button>
          </div>
        </div>
      </form>
    
    
      <p class="lead">Here you can see all the locations that interest you. Do not forget to leave an impression of the chosen location so that in the future people can also pay attention to it.</p>
      {% if user.is_authenticated %}
          <button type="button"  class="btn bg-gradient-primary w-auto me-2"><a href="{% url "tours:locations-create" %}">Create New</a></button>
      {% endif %}
    
    </div>

    {% if location_list %}
      <div class="row">
        {% for location in location_list %}
          <div class="col-lg-6 mb-4">
            <div class="card border shadow-sm h-100">
              <div class="row g-0 h-100">
                <div class="col-md-4">
                  {% if location.image %}
                    <img src="{{ location.image.url }}" alt="{{ location.name }}" class="img-fluid h-100 w-100 rounded-start" style="object-fit: cover;">
                  {% else %}
                    <div class="d-flex justify-content-center align-items-center bg-secondary" style="height: 100%; width: 100%;">
                      <svg class="bd-placeholder-img" width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false">
                        <title>Placeholder</title>
                        <rect width="100%" height="100%" fill="#55595c"></rect>
                        <text x="50%" y="50%" fill="#eceeef" dy=".3em">No picture</text>
                      </svg>
                    </div>
                  {% endif %}
                </div>
                <div class="col-md-8"> <!-- Column for content -->
                  <div class="p-3 d-flex flex-column justify-content-between h-100"> <!-- Content section with padding -->
                    <div>
                      <strong class="d-block text-primary">Country: {{ location.country }}</strong>
                      <strong class="d-block text-primary">City: {{ location.city }}</strong>
                      <strong class="d-block text-primary">Location: {{ location.location }}</strong>
                      <h3>{{ location.name }}</h3>
                      <p class="text-secondary">
                        <i>{{ location.description|truncatewords:25 }}</i>
                      </p>
                    </div>
                    <div>
                      <a href="{{ location.get_absolute_url }}" class="text-primary icon-move-right">Continue reading
                        <i class="fas fa-arrow-right text-sm ms-1"></i>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <div class="d-flex justify-content-center">
        <h2>No locations yet</h2>
      </div>
    {% endif %}

    {% include "includes/pagination.html" %}
  </div>
</section>
{% endblock %}
